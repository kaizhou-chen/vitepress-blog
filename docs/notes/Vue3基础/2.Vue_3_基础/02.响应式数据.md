## 响应式数据

### 什么是响应式

响应式是为了实现数据和函数的联动，当数据变化后，用到该数据的函数会自动重新执行。

- 副作用函数，会更改程序里的状态，比如更新DOM


响应式的基本思路：

- 创建代理对象

- 获取值时，在 get 里收集依赖关系，将当前运行的函数设为订阅者

- 修改值时，在 set 里触发执行，通知所有订阅过的函数重新执行


### ref、reactive

setup中定义的变量不是响应式的，需要使用 ref 和 reactive 来定义响应式的数据

| 响应式API | 说明                                                         | 备注                                                     |
| --------- | ------------------------------------------------------------ | -------------------------------------------------------- |
| ref       | 返回一个响应式的、可更改的 ref 对象 【参数为基本数据类型，或对象】 | ref 对象是可更改的，也就是说你可以为 `.value` 赋予新的值 |
| reactive  | 返回一个对象的响应式代理 【参数只能是对象或数组】            | 重新分配一个新对象，会失去响应式。即：不能重新赋值       |
| toRefs    | 将一个响应式对象中的每一个属性，都转换为`ref`对象，方便解构  |                                                          |

- reactive 响应式转换是“深层”的：它会影响到所有嵌套的属性。

​       即：这些嵌套的对象和数组发生变化，也会触发视图更新

- **在组合式函数，及在pinia中，最好都使用 ref** 
